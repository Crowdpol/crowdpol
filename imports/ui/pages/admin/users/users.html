<template name="users">
  <div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col">
      <h3> {{_"admin.users.heading"}} </h3>

      {{#if Template.subscriptionsReady}}

          <table class="mdl-data-table mdl-js-data-table mdl-data-table mdl-shadow--2dp">
        <thead>
          <tr>
            <th class="mdl-data-table__cell--non-numeric">{{_"admin.users.name"}}</th>
            <th>{{_"admin.users.email"}}</th>
            <th>{{_"admin.users.roles"}}</th>
            <th>{{_"admin.users.public"}}</th>
            <th></th>
          </tr>
        </thead>
        <tbody>

        {{#each users}}
            <tr>
            <td class="mdl-data-table__cell--non-numeric"> {{profile.firstName}} {{profile.lastName}} </td>
            <td class="mdl-data-table__cell--non-numeric"> 
              {{#each emails}} 
                {{address}}
              {{/each}}
            </td>
            <td class="mdl-data-table__cell--non-numeric"> {{roles}} </td>
            <td class="mdl-data-table__cell--non-numeric"> 
              {{#if profile.isPublic}} 
                <i class="mdi mdi-check-circle"></i>
              {{else}}
                <i class="mdi mdi-close-circle"></i> 
              {{/if}}
            </td>
            <td>
              <button id="delete-button" class="mdl-button mdl-js-button mdl-button--raised" data-user-id={{_id}}>
                  <i class="mdi mdi-delete"></i>  {{_'admin.users.delete-button'}}
                </button>
            </td>
          </tr>
        {{/each}}

        </tbody>
      </table>

      {{else}}
        <p> Loading... </p>
      {{/if}}

  <hr>

  <table class="mdl-data-table mdl-js-data-table mdl-data-table mdl-shadow--2dp">
    <thead>
      <tr>
        <th>{{_"admin.users.email"}}</th>
        <th>{{_"admin.users.roles"}}</th>
        <th></th>
      </tr>
    </thead>
    <tbody>

    {{#each pendingApprovals}}
        <tr>
        <td class="mdl-data-table__cell--non-numeric"> {{profile.firstName}} {{profile.lastName}} </td>
        <td class="mdl-data-table__cell--non-numeric"> {{roles}} </td>
        <td>
          <button id="approve-button" class="mdl-button mdl-js-button mdl-button--raised" data-user-id={{_id}}>
              <i class="mdi mdi-close-circle"></i>  {{_'admin.users.approve-button'}}
            </button>
        </td>
        <td>
          <button id="reject-button" class="mdl-button mdl-js-button mdl-button--raised" data-user-id={{_id}}>
              <i class="mdi mdi-check-circle"></i>  {{_'admin.users.reject-button'}}
            </button>
        </td>
      </tr>
    {{/each}}

    </tbody>
  </table>

  {{else}}
    <p> Loading... </p>
  {{/if}}

      <h3> {{_"admin.users.invite-heading"}} </h3>


      <form id="invite">
        <div class="mdl-textfield mdl-js-textfield">
          <label class="mdl-textfield__label"> {{_ "email-address"}}</label>
          <input type="email" id="invite-email" class="mdl-textfield__input" placeholder='{{_ "email-address"}}'>
        </div>

        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label getmdl-select getmdl-select__fix-height">
          <input class="mdl-textfield__input" type="text" id="invite-role" data-val="voter" value="{{_'roles.voter'}}" readonly tabIndex="-1">
          <label for="invite-role">
            <i class="mdl-icon-toggle__label material-icons">keyboard_arrow_down</i>
          </label>
          <label for="invite-role" class="mdl-textfield__label">{{_'admin.users.invite-role'}}</label>
          <ul for="invite-role" class="mdl-menu mdl-menu--bottom-left mdl-js-menu">
            <li class="mdl-menu__item dropdown-item" data-val="voter">{{_'roles.voter'}}</li>
            <li class="mdl-menu__item dropdown-item" data-val="party-delegate">{{_'roles.party-delegate'}}</li>
            <li class="mdl-menu__item dropdown-item" data-val="organisation-delegate">{{_'roles.organisation-delegate'}}</li>
          </ul>
        </div>

        <div class="form-group">
          <input type="submit" class="mdl-button mdl-js-button mdl-button--raised" value='{{_ "admin.users.invite-button"}}'>
        </div>

      </form>
    </div>
  </div>
</template>