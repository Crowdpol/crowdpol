<template name="Header">

	<!-- Always shows a header, even in smaller screens. -->
	<header class="{{#if currentUser}}logged-in-header{{else}}logged-out-header{{/if}} mdl-layout__header">
		<div class="header-inner mdl-layout__header-row">
			{{#if currentUser}}
				<a href="/dash" class="header-link-signed-in">
				<span class="mdl-layout-title">
					<!-- This should be the page title -->
					{{#if Template.subscriptionsReady}}
						{{ title }}
					{{/if}}
				</span>
				</a>
			{{else}}

				<!--{{hideHamburger}}{{showHamburger}}-->
				<a href="/"><!--
					<i class="material-icons">add</i>
					<h5>-->
					<span class="mdl-layout-title">
						{{#if Template.subscriptionsReady}}
							{{ title }}
						{{/if}}
					</span>
					<!--</h5>-->
			</a>
			{{/if}}
			<!-- Add spacer, to align navigation to the right -->
			<div class="mdl-layout-spacer"></div>
			{{#if currentUser}}
				<!-- Tag Search Field -->
				<form action="#" id="header-tag-search-form" style="display:none;">
					<div class="mdl-textfield mdl-js-textfield">
						<input class="mdl-textfield__input" type="text" id="header-tag-search" placeholder="{{_ 'layout.header.search_tags'}}">
					</div>
					<label class="mdl-button mdl-js-button mdl-button--icon" for="header-tag-search" id="search-button">
				      <i class="material-icons">search</i>
				    </label>
					<!-- Dropdown tag autocomplete -->
					{{#if matchedTags}}
					<ul class="demo-list-item mdl-list autocomplete-list" id="headerMatchedTagsList">
						{{#each matchedTags}}
						<li class="mdl-list__item autocomplete-item" data-keyword={{this}}>
							<span class="mdl-list__item-primary-content" data-keyword={{this}}>
								{{this}}
							</span>
						</li>
						{{/each}}
					</ul>
					{{/if}}
				</form>

				<!-- Navigation. We hide it in small screens. -->
				<nav class="mdl-navigation mdl-layout--large-screen-only">
					<!-- <a class="mdl-navigation__link" href="/dash">{{_ "layout.header.nav_dash"}}</a> -->
					<a class="mdl-navigation__link" href="/delegate">{{_ "layout.header.nav_delegate"}}</a>
					<a class="mdl-navigation__link" href="/proposals">{{_ "layout.header.nav_proposals"}}</a>
					
					<!--
					<a class="mdl-navigation__link" href="/candidate">{{_ "layout.header.nav_nominate"}}</a>
					-->
					{{#unless currentUser}}
						<a class="mdl-navigation__link" href="/login">{{_ "layout.header.nav_login"}}</a>
					{{/unless}}

					{{#if userHasMultipleRoles}}
						<!-- Role Selection Menu -->
						<a id="demo-menu-lower-left" class="mdl-navigation__link" href="/voting">
							{{ voteDropdownText }}<i class="material-icons">arrow_drop_down</i>
						</a>

						<ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="demo-menu-lower-left">
							{{#each roles}}
							<li class="mdl-menu__item role-menu-item" data-role="{{this}}">
								Vote as {{this}}
								{{#if isCurrentRole this}}
								<i class="material-icons small">check</i>
								{{/if}}
							</li>
							{{/each}}
						</ul>
					{{else}}
						<a class="mdl-navigation__link" href="/voting">{{_ "layout.header.nav_vote"}}</a>
					{{/if}}

					<!-- Notification Menu -->
					<div id="notifications-menu-icon" class="material-icons mdl-badge mdl-badge--overlap {{ unreadClass }}" data-badge="{{ unreadNotificationCount }}">notifications</div>

					{{> NotificationsDrawer}}
					
					<div class="mdl-layout__obfuscator-right"></div>

					<!-- Language Menu -->
					{{#if Template.subscriptionsReady}}
						{{#if showLanguages}}
							<button id="demo-menu-lower-right" class="mdl-button mdl-js-button">
								<i class="material-icons">language</i>{{ lang }}
							</button>
							
							<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
									for="demo-menu-lower-right">
								<li class="mdl-menu__item lang-sel" id="en">{{_ "layout.header.lang_en"}}</li>
								<li class="mdl-menu__item lang-sel" id="sv">{{_ "layout.header.lang_sv"}}</li>
							</ul>
						{{/if}}
					{{/if}}
				</nav>
			{{else}}
				<nav class="mdl-navigation" id="logged-out-nav">
					<a class="mdl-navigation__link" href="/about">{{_ "layout.header.nav_about"}}</a>
					<a class="mdl-navigation__link" href="/contact">{{_ "layout.header.nav_contact"}}</a>
					{{#unless currentUser}}
						<a class="mdl-navigation__link" href="/login">{{_ "layout.header.nav_login"}}</a>
					{{/unless}}
				</nav>
			{{/if}}
		</div>
	</header>

</template>

<template name="HomeHeader">
	<!-- Always shows a header, even in smaller screens. -->
	<header class="logged-out-header mdl-layout__header">
		<div class="header-inner mdl-layout__header-row">
			<a href="/">
				<i class="material-icons">add</i>
				<h5>{{_ "layout.header.home_title"}}</h5>
			</a>
			<!-- Add spacer, to align navigation to the right -->
			<div class="mdl-layout-spacer"></div>
				<nav class="mdl-navigation">
					<a class="mdl-navigation__link" href="/about">{{_ "layout.header.nav_about"}}</a>
					<a class="mdl-navigation__link" href="/contact">{{_ "layout.header.nav_contact"}}</a>
					{{#unless currentUser}}
						<a class="mdl-navigation__link" href="/login">{{_ "layout.header.nav_login"}}</a>
					{{/unless}}
				</nav>
		</div>
	</header>
</template>
