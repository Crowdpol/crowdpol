<template name="Header">

	<!-- Always shows a header, even in smaller screens. -->
	<header class="{{#if currentUser}}logged-in-header{{else}}logged-out-header{{/if}} mdl-layout__header">
		<div class="header-inner mdl-layout__header-row">
			{{#if currentUser}}
				<a href="/dash" class="header-link-signed-in">
				<span class="mdl-layout-title">
					<!-- This should be the page title -->
					{{#if Template.subscriptionsReady}}
						{{ title }}
					{{/if}}
				</span>
				</a>
			{{else}}

				<!--{{hideHamburger}}{{showHamburger}}-->
				<a href="/"><!--
					<i class="material-icons">add</i>
					<h5>-->
					<span class="mdl-layout-title">
						{{#if Template.subscriptionsReady}}
							{{ title }}
						{{/if}}
					</span>
					<!--</h5>-->
			</a>
			{{/if}}
			<!-- Add spacer, to align navigation to the right -->
			<div class="mdl-layout-spacer"></div>
			{{#if currentUser}}
				<!-- Tag Search Field -->
				<form action="#" id="header-tag-search-form" style="display:none;">
					<div class="mdl-textfield mdl-js-textfield">
						<input class="mdl-textfield__input" type="text" id="header-tag-search" placeholder="{{_ 'layout.header.search_tags'}}">
					</div>
					<label class="mdl-button mdl-js-button mdl-button--icon" for="header-tag-search" id="search-button">
				      <i class="material-icons">search</i>
				    </label>
					<!-- Dropdown tag autocomplete -->
					{{#if matchedTags}}
					<ul class="demo-list-item mdl-list autocomplete-list" id="headerMatchedTagsList">
						{{#each matchedTags}}
						<li class="mdl-list__item autocomplete-item" data-keyword={{this}}>
							<span class="mdl-list__item-primary-content" data-keyword={{this}}>
								{{this}}
							</span>
						</li>
						{{/each}}
					</ul>
					{{/if}}
				</form>

				<!-- Navigation. We hide it in small screens. -->
				<nav class="mdl-navigation mdl-layout--large-screen-only" id="main-menu">
					<a class="mdl-navigation__link" href="/dash" id="dash-menu">{{_ "layout.header.nav_dash"}}</a>
					<a class="mdl-navigation__link" href="/voting" id="vote-menu">{{_ "layout.header.nav_vote"}}</a>
					<a class="mdl-navigation__link" href="/proposals" id="proposals-menu">{{_ "layout.header.nav_proposals"}}</a>
					<a class="mdl-navigation__link" href="/delegate" id="delegate-menu">{{_ "layout.header.nav_delegate"}}</a>
					<!--
					<a class="mdl-navigation__link" href="/candidate">{{_ "layout.header.nav_nominate"}}</a>
					-->
					{{#unless currentUser}}
						<a class="mdl-navigation__link" href="/login">{{_ "layout.header.nav_login"}}</a>
					{{/unless}}

					<!-- Notification Menu -->
					<div id="notifications-menu-icon" class="material-icons mdl-badge mdl-badge--overlap {{ unreadClass }}" data-badge="{{ unreadNotificationCount }}">notifications</div>

					{{> NotificationsDrawer}}
					
					<div class="mdl-layout__obfuscator-right"></div>

					<!-- Language Menu -->
					{{#if Template.subscriptionsReady}}
						{{#if showLanguages}}
							<button id="language-menu" class="mdl-button mdl-js-button">
								<i class="material-icons">language</i>{{ lang }}
							</button>
							
							<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
									for="language-menu">
									{{#each langs}}
										<li class="mdl-menu__item lang-sel" id="{{this}}">{{getLang this}}</li>
									{{/each}}
							</ul>
						{{/if}}
					{{/if}}
					<a class="mdl-navigation__link" href="/"><i class="material-icons" id="main-help">help_outline</i></a>
				</nav>
			{{else}}
				<nav class="mdl-navigation" id="logged-out-nav">
					<a class="mdl-navigation__link" href="/about">{{_ "layout.header.nav_about"}}</a>
					<a class="mdl-navigation__link" href="/contact">{{_ "layout.header.nav_contact"}}</a>
					{{#unless currentUser}}
						<a class="mdl-navigation__link" href="/login">{{_ "layout.header.nav_login"}}</a>
					{{/unless}}
				</nav>
			{{/if}}
		</div>
	</header>

</template>

<template name="HomeHeader">
	<!-- Always shows a header, even in smaller screens. -->
	<header class="logged-out-header mdl-layout__header">
		<div class="header-inner mdl-layout__header-row">
			<a href="/">
				<i class="material-icons">add</i>
				<h5>{{_ "layout.header.home_title"}}</h5>
			</a>
			<!-- Add spacer, to align navigation to the right -->
			<div class="mdl-layout-spacer"></div>
				<nav class="mdl-navigation">
					<a class="mdl-navigation__link" href="/about">{{_ "layout.header.nav_about"}}</a>
					<a class="mdl-navigation__link" href="/contact">{{_ "layout.header.nav_contact"}}</a>
					{{#unless currentUser}}
						<a class="mdl-navigation__link" href="/login">{{_ "layout.header.nav_login"}}</a>
					{{/unless}}
				</nav>
		</div>
	</header>
</template>
